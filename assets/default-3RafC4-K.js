import{p as A,G as Y,s as B,c as m,a0 as j,w as p,o as q,b as D,j as O,q as F,E as G,u as J,H as Z,y as P,J as W,L as r,M as R,d as K,a1 as Q,f as ee,a2 as te,k as ae,l as le,n as oe,a3 as ne,x as se,B as re,a4 as ue,a5 as ie,a6 as ce,a7 as de,a8 as ve,a9 as me,aa as ge,ab as fe,ac as X,R as he,S as be,ad as Se,ae as ye,U as Ve,W as C,X as h,O as _,Y as k,af as T,ag as L,ah as ke,_ as $,Z as U,$ as I,ai as H,aj as N,ak as Be,al as we,am as xe}from"./index-DKCvdjhR.js";import{m as pe,V as z}from"./VToolbar-DMwmIQM3.js";import{u as Ce,V as _e,a as Te}from"./VList-rlTrpg6X.js";import{V as Le}from"./VMain-B4wc_l0q.js";import{V as Pe}from"./VContainer-CkJ3D8mY.js";import{V as Ie}from"./VMenu-C4aYcRCu.js";import"./VDivider-CwfWU26r.js";const He=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ne(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=u;let b=0,c=0;const t=Y(null),d=B(0),i=B(0),S=B(0),g=B(!1),a=B(!1),v=m(()=>Number(e.scrollThreshold)),n=m(()=>j((v.value-d.value)/v.value||0)),y=()=>{const s=t.value;if(!s||o&&!o.value)return;b=d.value,d.value="window"in s?s.pageYOffset:s.scrollTop;const f=s instanceof Window?document.documentElement.scrollHeight:s.scrollHeight;if(c!==f){c=f;return}a.value=d.value<b,S.value=Math.abs(d.value-v.value)};return p(a,()=>{i.value=i.value||d.value}),p(g,()=>{i.value=0}),q(()=>{p(()=>e.scrollTarget,s=>{var V;const f=s?document.querySelector(s):window;f&&f!==t.value&&((V=t.value)==null||V.removeEventListener("scroll",y),t.value=f,t.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),D(()=>{var s;(s=t.value)==null||s.removeEventListener("scroll",y)}),o&&p(o,y,{immediate:!0}),{scrollThreshold:v,currentScroll:d,currentThreshold:S,isScrollActive:g,scrollRatio:n,isScrollingUp:a,savedScroll:i}}const Re=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...pe(),...O(),...He(),height:{type:[Number,String],default:64}},"VAppBar"),Ae=F()({name:"VAppBar",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:o}=u;const b=Y(),c=G(e,"modelValue"),t=m(()=>{var w;const l=new Set(((w=e.scrollBehavior)==null?void 0:w.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),d=m(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!c.value}),{currentScroll:i,scrollThreshold:S,isScrollingUp:g,scrollRatio:a}=Ne(e,{canScroll:d}),v=m(()=>t.value.hide||t.value.fullyHide),n=m(()=>e.collapse||t.value.collapse&&(t.value.inverted?a.value>0:a.value===0)),y=m(()=>e.flat||t.value.fullyHide&&!c.value||t.value.elevate&&(t.value.inverted?i.value>0:i.value===0)),s=m(()=>t.value.fadeImage?t.value.inverted?1-a.value:a.value:void 0),f=m(()=>{var E,M;if(t.value.hide&&t.value.inverted)return 0;const l=((E=b.value)==null?void 0:E.contentHeight)??0,w=((M=b.value)==null?void 0:M.extensionHeight)??0;return v.value?i.value<S.value||t.value.fullyHide?l+w:l:l+w});J(m(()=>!!e.scrollBehavior),()=>{K(()=>{v.value?t.value.inverted?c.value=i.value>S.value:c.value=g.value||i.value<S.value:c.value=!0})});const{ssrBootStyles:V}=Ce(),{layoutItemStyles:x}=Z({id:e.name,order:m(()=>parseInt(e.order,10)),position:P(e,"location"),layoutSize:f,elementSize:B(void 0),active:c,absolute:P(e,"absolute")});return W(()=>{const l=z.filterProps(e);return r(z,R({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":s.value,height:void 0,...V.value},e.style]},l,{collapse:n.value,flat:y.value}),o)}),{}}}),Ee=A({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Q,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ee(),...te({location:"top end"}),...ae(),...le(),...oe(),...ne({transition:"scale-rotate-transition"})},"VBadge"),Me=F()({name:"VBadge",inheritAttrs:!1,props:Ee(),setup(e,u){const{backgroundColorClasses:o,backgroundColorStyles:b}=se(P(e,"color")),{roundedClasses:c}=re(e),{t}=ue(),{textColorClasses:d,textColorStyles:i}=ie(P(e,"textColor")),{themeClasses:S}=ce(),{locationStyles:g}=de(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?+(e.offsetY??0):["left","right"].includes(a)?+(e.offsetX??0):0));return W(()=>{const a=Number(e.content),v=!e.max||isNaN(a)?e.content:a<=+e.max?a:`${e.max}+`,[n,y]=ve(u.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return r(e.tag,R({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},y,{style:e.style}),{default:()=>{var s,f;return[r("div",{class:"v-badge__wrapper"},[(f=(s=u.slots).default)==null?void 0:f.call(s),r(me,{transition:e.transition},{default:()=>{var V,x;return[ge(r("span",R({class:["v-badge__badge",S.value,o.value,c.value,d.value],style:[b.value,i.value,e.inline?{}:g.value],"aria-atomic":"true","aria-label":t(e.label,a),"aria-live":"polite",role:"status"},n),[e.dot?void 0:u.slots.badge?(x=(V=u.slots).badge)==null?void 0:x.call(V):e.icon?r(X,{icon:e.icon},null):v]),[[fe,e.modelValue]])]}})])]}})}),{}}}),je={__name:"default",setup(e){const{t:u}=he(),o=be(),{apiAuth:b}=xe(),c=Se(),t=ye(),d=m(()=>[{to:"/register",text:u("nav.register"),icon:"mdi-account-plus",show:!o.isLoggedIn},{to:"/login",text:u("nav.login"),icon:"mdi-account-arrow-left",show:!o.isLoggedIn},{to:"/cart",text:u("nav.cart"),icon:"mdi-cart",show:o.isLoggedIn},{to:"/orders",text:u("nav.orders"),icon:"mdi-format-list-bulleted",show:o.isLoggedIn},{to:"/admin",text:u("nav.admin"),icon:"mdi-cog",show:o.isLoggedIn&&o.isAdmin}]),i=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],S=async()=>{try{await b.delete("/user/logout")}catch(g){console.log(g)}o.logout(),c({text:u("logout.success"),snackbarProps:{color:"green"}}),t.push("/")};return(g,a)=>{const v=Ve("router-view");return k(),C(_,null,[r(Ae,null,{default:h(()=>[r(Pe,{class:"d-flex align-center"},{default:h(()=>[r(T,{to:"/",active:!1},{default:h(()=>a[0]||(a[0]=[L("購物網站")])),_:1}),r(ke),(k(!0),C(_,null,$(d.value,n=>(k(),C(_,{key:n.to},[n.show?(k(),I(T,{key:0,to:n.to,"prepend-icon":n.icon},{default:h(()=>[L(H(n.text)+" ",1),n.to==="/cart"?(k(),I(Me,{key:0,content:U(o).cart,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),U(o).isLoggedIn?(k(),I(T,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:S},{default:h(()=>[L(H(g.$t("nav.logout")),1)]),_:1})):N("",!0),r(Ie,null,{activator:h(({props:n})=>[r(T,Be(we(n)),{default:h(()=>[r(X,{icon:"mdi-translate"})]),_:2},1040)]),default:h(()=>[r(_e,null,{default:h(()=>[(k(),C(_,null,$(i,n=>r(Te,{key:n.value,onClick:y=>g.$i18n.locale=n.value},{default:h(()=>[L(H(n.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),r(Le,null,{default:h(()=>[r(v)]),_:1})],64)}}};export{je as default};
