import{S as B,ae as $,ad as L,R as N,G as R,c as m,Y as o,$ as _,X as s,L as t,aw as f,ai as l,W as V,_ as A,O as v,af as n,ag as g,aR as I,V as S,aj as q,am as z}from"./index-DKCvdjhR.js";import{V as u,a as D,b as h}from"./route-block-A_OJPrSW.js";import{V as k}from"./VDivider-CwfWU26r.js";import{V as j,a as E}from"./VList-rlTrpg6X.js";import{V as F}from"./VContainer-CkJ3D8mY.js";const G={class:"text-center"},O={__name:"cart",setup(T){const{apiAuth:i}=z(),y=B();$(),L(),N();const r=R([]),d=async()=>{try{const{data:e}=await i.get("/user/cart");r.value=e.result}catch(e){console.log(e)}};d();const C=m(()=>r.value.reduce((e,c)=>e+c.product.price*c.quantity,0)),b=m(()=>r.value.length>0&&r.value.every(e=>e.product.sell)),p=async(e,c)=>{try{const{data:a}=await i.patch("/user/cart",{product:e,quantity:c});y.cart=a.result,d()}catch(a){console.log(a)}};return(e,c)=>(o(),_(F,null,{default:s(()=>[t(D,null,{default:s(()=>[t(u,{cols:"12"},{default:s(()=>[f("h1",G,l(e.$t("nav.cart")),1)]),_:1}),t(k),t(u,{cols:"12"},{default:s(()=>[t(j,{lines:"two"},{default:s(()=>[(o(!0),V(v,null,A(r.value,(a,w)=>(o(),V(v,{key:a._id},[t(E,{title:a.product.name,subtitle:a.product.price,"active-class":"bg-red",active:!a.product.sell},{prepend:s(()=>[t(I,{rounded:"0"},{default:s(()=>[t(S,{src:a.product.image},null,8,["src"])]),_:2},1024)]),append:s(()=>[t(n,{color:"red",icon:"mdi-minus",size:"small",class:"mr-2",onClick:x=>p(a.product._id,-1)},null,8,["onClick"]),g(" "+l(a.quantity)+" ",1),t(n,{color:"green",icon:"mdi-plus",size:"small",class:"ml-2",onClick:x=>p(a.product._id,1)},null,8,["onClick"])]),_:2},1032,["title","subtitle","active"]),w<r.value.length-1?(o(),_(k,{key:0})):q("",!0)],64))),128))]),_:1})]),_:1}),t(u,{cols:"12",class:"text-center"},{default:s(()=>[f("p",null,l(C.value),1),t(n,{color:"primary",disabled:!b.value},{default:s(()=>[g(l(e.$t("cart.checkout")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}))}};typeof h=="function"&&h(O);export{O as default};
